<div class="preferences-page">
  <div class="preferences-page__container">
    <!-- Progress Sidebar -->
    <div class="preferences-page__progress">
      <div class="progress-widget">
        <div class="progress-widget__step">
          <div class="progress-widget__dot"></div>
          <span class="progress-widget__label">Trip details</span>
        </div>
        <div class="progress-widget__step">
          <div class="progress-widget__dot"></div>
          <span class="progress-widget__label">Invite friends</span>
        </div>
        <div class="progress-widget__step progress-widget__step--active">
          <div class="progress-widget__dot"></div>
          <span class="progress-widget__label">Preferences</span>
        </div>
        <div class="progress-widget__step">
          <div class="progress-widget__dot"></div>
          <span class="progress-widget__label">Suggestions</span>
        </div>
        <div class="progress-widget__step">
          <div class="progress-widget__dot"></div>
          <span class="progress-widget__label">Itinerary</span>
        </div>
      </div>
    </div>

    <!-- Main Form -->
    <div class="preferences-page__main">
      <h1 class="preferences-page__title">Tell us what you like</h1>
      <h2 class="preferences-page__subtitle">Step <%= @step %> of 4</h2>

      <%= form_with(model: @preferences_form, url: trip_preferences_form_path(@trip), method: :post, class: "preferences-form") do |form| %>
        <%= hidden_field_tag :step, @step %>

        <% case @step %>
        <% when 1 %>
          <!-- Step 1: Budget & Pace -->
          <div class="preferences-form__field">
            <%= form.label :budget, "What's your budget?", class: "preferences-form__label" %>
            <%= form.select :budget, [["Low", "low"], ["Medium", "medium"], ["High", "high"]], {}, class: "preferences-form__input" %>
          </div>

          <div class="preferences-form__field">
            <%= form.label :travel_pace, "Travel pace", class: "preferences-form__label" %>
            <%=form.select :travel_pace, [["Relaxed", "relaxed"], ["Moderate", "moderate"], ["Fast-paced", "fast"]], {}, class: "preferences-form__input" %>
          </div>

        <% when 2 %>
          <!-- Step 2: Interests -->
          <div class="preferences-form__field">
            <%= form.label :interests, "What are you interested in?", class: "preferences-form__label" %>
            <%= form.text_area :interests, class: "preferences-form__textarea", placeholder: "Museums, food, nightlife..." %>
          </div>

        <% when 3 %>
          <!-- Step 3: Activity Types -->
          <div class="preferences-form__field">
            <%= form.label :activity_types, "Favorite activities", class: "preferences-form__label" %>
            <%= form.text_area :activity_types, class: "preferences-form__textarea", placeholder: "Walking tours, restaurants..." %>
          </div>

        <% when 4 %>
          <!-- Step 4: Confirmation -->
          <div class="preferences-form__summary">
            <p>Review your preferences before submitting.</p>
          </div>
        <% end %>

        <div class="preferences-form__navigation">
          <% if @step > 1 %>
            <%= link_to "Previous", new_trip_preferences_form_path(@trip, step: @step - 1), class: "preferences-form__button preferences-form__button--secondary" %>
          <% end %>

          <% if @step < 4 %>
            <%= form.submit "Next", class: "preferences-form__button preferences-form__button--primary" %>
          <% else %>
            <%= form.submit "Submit preferences", class: "preferences-form__button preferences-form__button--primary" %>
          <% end %>
        </div>
      <% end %>
    </div>

    <!-- Tips Sidebar -->
    <div class="preferences-page__tips">
      <div class="tip-card">
        <h3 class="tip-card__title">Tip #3</h3>
        <p class="tip-card__text">Know what you love â€” it's the difference between "best trip ever" and "why did we come here?"</p>
      </div>
    </div>
  </div>
</div>
